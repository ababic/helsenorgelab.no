{% extends "patterns/base.html" %}

{% load static wagtailuserbar wagtailcore_tags wagtailimages_tags navigation_tags util_tags %}

{% block meta_tags %}
    {% if GOOGLE_TAG_MANAGER_ID %}
        {# To enable GTM code you need to specify GOOGLE_TAG_MANAGER_ID in Django settings #}
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','{{ GOOGLE_TAG_MANAGER_ID|escapejs }}');</script>
    {% endif %}

    {# favicons #}
    {% comment %}
        Generate favicons by http://realfavicongenerator.net using the following path: settings.STATIC_URL + img/favicons.
        Then favicon.ico should be copied to a directory called "public" in the application root and puppet does some magic to serve it up at the site root.
    {% endcomment %}

    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/favicon/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon/favicon-16x16.png' %}">
    <link rel="manifest" href="{% static 'images/favicon/site.webmanifest' %}">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    {% comment %}
        Twitter summary card - see https://dev.twitter.com/cards/types/summary
        and https://dev.twitter.com/cards/getting-started
    {% endcomment %}
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@{{ settings.utils.SocialMediaSettings.twitter_handle }}" />
    <meta name="twitter:title" content="{{ page.title }}" />
    <meta name="twitter:description" content="{{ page|social_text:request.site }}">
    {% if page.social_image  %}
        {% image page.social_image width-320 as social_img %}
        <meta name="twitter:image" content="{{ request.site.root_url }}{{ social_img.url }}">
    {% else %}
        {# Add a default image to use for social sharing here in case one is not provided on the page. #}
    {% endif %}

    {# facebook opengraph tags #}
    <meta property="fb:app_id" content="{{ settings.utils.SocialMediaSettings.facebook_app_id }}" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="{{ page.url }}" />
    <meta property="og:title" content="{{ page.title }}" />
    {% if page.social_image %}
        <meta property="og:image" content="http://{{ request.site.hostname }}{{ social_img.url }}" />
    {% else %}
        {# Add a default image to use for social sharing here in case one is not provided on the page. #}
    {% endif %}
    <meta property="og:description" content="{{ page|social_text:request.site }}" />
    <meta property="og:site_name" content="{{ settings.utils.SocialMediaSettings.site_name }}" />
{% endblock meta_tags %}


{% block body_top %}
    {% if GOOGLE_TAG_MANAGER_ID %}
        {# To enable GTM code you need to specify GOOGLE_TAG_MANAGER_ID in Django settings #}
        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id={{ GOOGLE_TAG_MANAGER_ID|escapejs }}"
        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    {% endif %}
{% endblock body_top %}


{% block header %}
    <header>
            <nav class="navbar navbar-expand-lg navbar-light bg-white pt-1 pb-1" aria-label="Primary">
                <div class="container">
                    <a class="navbar-brand" href="{% slugurl 'home' %}">
                        <svg height="35" viewBox="0 0 159 20" width="159" xmlns="http://www.w3.org/2000/svg"><text fill="#1c166c" fill-rule="evenodd" font-family="PlayfairDisplay-Bold, Playfair Display" font-size="20" font-weight="bold" transform="translate(-100 -38)"><tspan x="100" y="54">helsenorgelab.no</tspan></text></svg>
                    </a>
                    
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                      <span class="navbar-toggler-icon"></span>
                    </button>
                  
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        {% primarynav %}
                        <button class="btn text-primary" type="button" data-toggle="collapse" data-target="#headerSearch" aria-controls="headerSearch" aria-expanded="false" aria-label="Toggle search">
                                <i class="material-icons align-top">search</i><span class="sr-only">S&oslash;k</span>
                        </button>      
                    </div>           
                </div>
            </nav>
            <div class="collapse navbar-collapse py-5 bg-light" id="headerSearch">
                <div class="container">
                        <form action="{% url 'search' %}" method="get" role="search" class="form-inline my-2 my-lg-0">
                                <input class="input form-control mr-sm-2" type="text" placeholder="S&oslash;kâ€¦" name="query"{% if search_query %} value="{{ search_query }}{% endif %}">
                                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">
                                         S&oslash;k
                                </button>
                            </form>
                </div>
            </div>


    </header>
{% endblock header %}

{% block footer %}
    <footer class="footer bg-white mt-10 pt-2 pb-1">
        <div class="container">
                <section>
                    {% footerlinks %}
                </section>

                <section>
                    {% footerbottomtext %}
                </section>
            </div>
        </div>
    </footer>
{% endblock footer %}

